functions:
  - name: example.text.concat
    type: TASK
    outputCls: example.text
    provision:
      knative:
        image: ghcr.io/hpcclab/oaas/concat-function:latest

  - name: example.empty.concat-macro
    type: MACRO
    outputCls: example.text
    macro:
      steps:
        - funcName: "example.text.concat"
          target: "$"
          as: "out1"
          args:
            APPEND: NEW_TEXT1
        - funcName: "example.text.concat"
          target: "out1"
          as: "out2"
          args:
            APPEND: NEW_TEXT2
      export: out2

classes:
  - name: example.text
    stateType: FILE
    objectType: SIMPLE
    stateSpec:
      keySpecs:
        - name: text
    functions:
      - access: PUBLIC
        function: example.text.concat
      - access: PUBLIC
        function: example.text.macro
