functions:
  - name: builtin.text.concat
    type: TASK
    outputCls: builtin.text
    validation:
      additionalInputs:
        - requiredClass: builtin.text
    task:
      type: EPHEMERAL
      image: core.harbor.10.131.36.27.nip.io/oaas/ubi
      commands:
        - /bin/sh
        - '-c'
      outputFileNames:
        - text
      containerArgs:
        - |
          curl -s -o tmp_file $MAIN_RESOURCE_BASE_URL/$MAIN_RESOURCE_FILE_0
          echo "Download main file $MAIN_RESOURCE_BASE_URL/$MAIN_RESOURCE_FILE_0"
          curl -s -o input_0_file $INPUT_0_RESOURCE_BASE_URL/$INPUT_0_RESOURCE_FILE_0
          echo "Download input 0 file $INPUT_0_RESOURCE_BASE_URL/$INPUT_0_RESOURCE_FILE_0"
          cat input_0_file >> tmp_file
          echo "concat string"
          curl -s -T tmp_file $OUTPUT_RESOURCE_BASE_URL/$OUTPUT_RESOURCE_FILE_0
          echo "Upload file to $OUTPUT_RESOURCE_BASE_URL/$OUTPUT_RESOURCE_FILE_0"
      argsToEnv: true
classes:
  - name: builtin.text
    stateType: FILE
    objectType: RESOURCE
    functions:
      - access: PUBLIC
        function: builtin.logical.copy
      - access: PUBLIC
        function: builtin.text.concat
